通过分析项目结构，我发现添加新闻源的流程是标准化的。主要涉及以下几个文件和目录：


   * shared/pre-sources.ts: 这是新闻源的配置文件，定义了所有新闻源的元数据（如 ID、名称、URL、图标等）。
   * server/sources/: 这个目录存放了每个新闻源抓取数据的具体实现。每个文件对应一个新闻源。
   * public/icons/: 存放新闻源的图标文件。
   * scripts/source.ts: 一个脚本，用于根据 pre-sources.ts 生成最终的 sources.json 和 sources.ts。


  为了让你更清楚地了解具体步骤，我将读取 shared/pre-sources.ts 和一个示例源文件 server/sources/baidu.ts 的内容。

  分析完毕。添加一个新的新闻源，你需要遵循以下步骤：


  第 1 步：添加源配置


  打开 shared/pre-sources.ts 文件，在 originSources 对象中添加一个新的条目。


  例如，如果要添加一个名为 “MyNews” 的新闻源，可以这样添加：


```
   1   // ... 其他源
   2   "mynews": {
   3     name: "MyNews", // 显示的名称
   4     type: "hottest", // 'hottest' 或 'realtime'
   5     column: "tech", // 所属栏目，如 'tech', 'finance', 'world', 'china'
   6     color: "blue", // 主题颜色
   7     home: "https://news.example.com", // 官网主页
   8   },
   9   // ... 其他源
```


   * id (你设置的 key，例如 "mynews")：必须是唯一的，并且将用作文件名。
   * 如果你的新闻源有多个分类（sub-source），可以参考 bilibili 或 cls 的配置结构。


  第 2 步：创建抓取逻辑文件


  在 server/sources/ 目录下创建一个新文件，文件名必须与你在上一步中设置的 `id` 相同，并以 .ts 结尾。例如：server/sources/mynews.ts。


  这个文件的作用是抓取并解析新闻数据，然后返回一个标准格式的数组。你可以参考 server/sources/baidu.ts 的实现。


  这是一个基本模板：


```
    1 // server/sources/mynews.ts
    2 
    3 // 导入你需要的类型
    4 // import type { SourceItem } from '~/server/types'
    5 
    6 export default defineSource(async () => {
    7   // 1. 使用 myFetch 或其他方式抓取原始数据 (HTML 或 JSON)
    8   const response = await myFetch('https://news.example.com/api/hot');
    9 
   10   // 2. 解析数据
   11   // 这部分取决于你抓取到的数据格式
   12   const items = response.data.items; // 假设返回的是 JSON
   13 
   14   // 3. 将解析后的数据映射为标准格式
   15   return items.map((item: any) => {
   16     return {
   17       // 必须字段
   18       title: item.title,
   19       url: item.link,
   20 
   21       // 可选字段
   22       id: item.id, // 如果有唯一ID，最好提供
   23       heat: item.heat_count, // 热度
   24       extra: {
   25         hover: item.description, // 鼠标悬浮时显示的额外信息
   26       }
   27     }
   28   })
   29 })
```


  核心要求：文件必须默认导出一个 defineSource 函数，该函数的异步回调必须返回一个包含新闻条目的数组，每个条目至少要有 title 和 url 字段。


  第 3 步：添加图标


  在 public/icons/ 目录下，添加一个新图标文件。文件名应为 <id>.png，例如 mynews.png。推荐尺寸为 32x32 或 64x64 像素。

  第 4 步：更新源列表


  为了让你的更改生效，需要运行一个脚本来重新生成 sources.json 和 sources.ts。在项目根目录执行以下命令：

```

   1 pnpm run script:source

```

  第 5 步：验证

  最后，启动开发服务器，检查你的新新闻源是否已成功添加并能正常工作。

```

   1 pnpm dev

```



  按照以上步骤操作，你就可以成功添加一个新的新闻源了。如果需要，我可以为你生成一个模板文件